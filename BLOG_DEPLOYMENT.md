# üìù –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–ª–æ–≥–æ–≤ - Ospabhost 8.1

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–≥–æ–≤ —Å:
- –ü—É–±–ª–∏—á–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ (`/blog`, `/blog/:url`)
- –ê–¥–º–∏–Ω—Å–∫–æ–π –ø–∞–Ω–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (`/dashboard/blog`)
- Rich Text —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º (Quill.js)
- –°–∏—Å—Ç–µ–º–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π
- –ó–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### Backend

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ modules/
‚îÇ       ‚îî‚îÄ‚îÄ blog/
‚îÇ           ‚îú‚îÄ‚îÄ blog.controller.ts      # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–ø–æ—Å—Ç—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
‚îÇ           ‚îú‚îÄ‚îÄ blog.routes.ts          # –ú–∞—Ä—à—Ä—É—Ç—ã + multer –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ           ‚îî‚îÄ‚îÄ upload.controller.ts    # –ó–∞–≥—Ä—É–∑–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ uploads/
‚îÇ   ‚îî‚îÄ‚îÄ blog/                           # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–ª–æ–≥–∞
‚îî‚îÄ‚îÄ prisma/
    ‚îî‚îÄ‚îÄ schema.prisma                   # –û–±–Ω–æ–≤–ª–µ–Ω–æ: –º–æ–¥–µ–ª–∏ Post, Comment
```

### Frontend

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ       ‚îú‚îÄ‚îÄ blog.tsx                    # –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ blogpost.tsx                # –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç—å–∏
‚îÇ       ‚îî‚îÄ‚îÄ dashboard/
‚îÇ           ‚îú‚îÄ‚îÄ blogadmin.tsx           # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–ª–æ–≥–∞
‚îÇ           ‚îî‚îÄ‚îÄ mainpage.tsx            # –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "üìù –ë–ª–æ–≥"
‚îî‚îÄ‚îÄ package.json                        # –û–±–Ω–æ–≤–ª–µ–Ω–æ: react-quill, quill
```

---

## üöÄ –®–∞–≥–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
cd ospabhost/frontend
npm install  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ react-quill –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm run build

cd ../backend
npm install
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
mkdir -p /var/www/ospab-host/ospabhost/backend/uploads/blog
chmod 755 /var/www/ospab-host/ospabhost/backend/uploads/blog
```

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ** –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /var/www/ospab-host/ospabhost/backend

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate deploy

# –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npx prisma generate
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ Git –∏–ª–∏ SFTP:

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/src/modules/blog/blog.controller.ts`
- `backend/src/modules/blog/blog.routes.ts`
- `backend/src/modules/blog/upload.controller.ts`
- `frontend/src/pages/blog.tsx`
- `frontend/src/pages/blogpost.tsx`
- `frontend/src/pages/dashboard/blogadmin.tsx`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/src/index.ts` (–¥–æ–±–∞–≤–ª–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã `/api/blog`, —Ä–∞–∑–¥–∞—á–∞ `/uploads/blog`)
- `backend/prisma/schema.prisma` (–º–æ–¥–µ–ª–∏ Post, Comment)
- `frontend/src/App.tsx` (–º–∞—Ä—à—Ä—É—Ç—ã `/blog`, `/blog/:url`)
- `frontend/src/pages/dashboard/mainpage.tsx` (–≤–∫–ª–∞–¥–∫–∞ "üìù –ë–ª–æ–≥")

### 5. –°–±–æ—Ä–∫–∞ backend

```bash
cd /var/www/ospab-host/ospabhost/backend
npm run build
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend

```bash
pm2 restart ospab-backend
pm2 logs ospab-backend  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```

### 7. –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π frontend

```bash
cd /var/www/ospab-host/ospabhost/frontend
npm run build

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é Nginx
cp -r dist/* /var/www/ospab-host/frontend/
```

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ü—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é uploads
chown -R www-data:www-data /var/www/ospab-host/ospabhost/backend/uploads/blog
chmod -R 755 /var/www/ospab-host/ospabhost/backend/uploads/blog

# –ü—Ä–∞–≤–∞ –Ω–∞ frontend
chown -R www-data:www-data /var/www/ospab-host/frontend/
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤ (–¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤)
curl https://ospab.host:5000/api/blog/posts

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω)
curl -H "Authorization: Bearer YOUR_TOKEN" \
     https://ospab.host:5000/api/blog/admin/posts
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- `https://ospab.host/blog` - —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
- `https://ospab.host/dashboard/blog` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥ –∫–∞–∫ –∞–¥–º–∏–Ω)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/dashboard/blog`
3. –ù–∞–∂–º–∏—Ç–µ "‚ûï –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é"
4. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å—Ç–∞–≤–∏–ª–æ—Å—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —Ä–∞–∑–¥–∞—á–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥ Nginx:

```nginx
location /uploads/blog {
    alias /var/www/ospab-host/ospabhost/backend/uploads/blog;
    access_log off;
    expires 30d;
    add_header Cache-Control "public, immutable";
}
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```bash
nginx -t
systemctl reload nginx
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª—å Post

```prisma
model Post {
  id          Int       @id @default(autoincrement())
  title       String
  content     String    @db.Text
  excerpt     String?   @db.Text
  coverImage  String?
  url         String    @unique
  status      String    @default("draft")
  views       Int       @default(0)
  authorId    Int
  author      User      @relation(fields: [authorId], references: [id])
  comments    Comment[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  publishedAt DateTime?
}
```

### –ú–æ–¥–µ–ª—å Comment

```prisma
model Comment {
  id         Int      @id @default(autoincrement())
  postId     Int
  post       Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  userId     Int?
  user       User?    @relation(fields: [userId], references: [id])
  authorName String?
  content    String   @db.Text
  status     String   @default("pending")
  createdAt  DateTime @default(now())
}
```

---

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ü—É–±–ª–∏—á–Ω–∞—è —á–∞—Å—Ç—å

- **`/blog`** - –°–ø–∏—Å–æ–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π —Å –ø—Ä–µ–≤—å—é
- **`/blog/:url`** - –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç—å—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏ –≥–æ—Å—Ç–∏)
- –°—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`/dashboard/blog`)

#### –í–∫–ª–∞–¥–∫–∞ "–°—Ç–∞—Ç—å–∏"
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π (—á–µ—Ä–Ω–æ–≤–∏–∫–∏, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ, –∞—Ä—Ö–∏–≤)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- –£–¥–∞–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- Rich Text —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å:
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π, –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π)
  - –ó–∞–≥–æ–ª–æ–≤–∫–∏ (H1-H6)
  - –í—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞
  - –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∏ —Ñ–æ–Ω–∞
  - –°–ø–∏—Å–∫–∏ (–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ)
  - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
  - –°—Å—ã–ª–∫–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–æ–∂–∫–∏ (URL)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–Ω—Ç (—á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ)
- –í—ã–±–æ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ URL (–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π slug)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º (—á–µ—Ä–Ω–æ–≤–∏–∫/–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ/–∞—Ä—Ö–∏–≤)

#### –í–∫–ª–∞–¥–∫–∞ "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è (–æ–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
- –£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–∞–º–∞
- –ü–æ–∫–∞–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞ (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–ª–∏ –≥–æ—Å—Ç—å)

---

## üîí –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- **–ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤** - –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º (–≥–æ—Å—Ç–∏ –≤–≤–æ–¥—è—Ç –∏–º—è)
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–ª–æ–≥–∞** - —Ç–æ–ª—å–∫–æ –¥–ª—è `user.isAdmin === true`
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- **–°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

---

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π —Å—Ç–∞—Ç—å–∏

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/dashboard/blog`
3. –ù–∞–∂–º–∏—Ç–µ "‚ûï –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –±–ª–æ–≥!"
   - **URL**: `welcome` (—Å—Ç–∞—Ç—å—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ `/blog/welcome`)
   - **–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ**: "–ü–µ—Ä–≤–∞—è —Å—Ç–∞—Ç—å—è –Ω–∞—à–µ–≥–æ –±–ª–æ–≥–∞"
   - **–û–±–ª–æ–∂–∫–∞**: `https://images.unsplash.com/photo-1499750310107-5fef28a66643`
   - **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É—è Rich Text —Ä–µ–¥–∞–∫—Ç–æ—Ä
   - **–°—Ç–∞—Ç—É—Å**: "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é"

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/dashboard/blog`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"
3. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏" –º–æ–∂–Ω–æ:
   - ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å (–ø–æ—è–≤—è—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ)
   - ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å (—Å–∫—Ä—ã—Ç—ã, –Ω–æ –Ω–µ —É–¥–∞–ª–µ–Ω—ã)
   - üóëÔ∏è –£–¥–∞–ª–∏—Ç—å (–ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "post and comment are not properties of PrismaClient"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /var/www/ospab-host/ospabhost/backend
npx prisma generate
npm run build
pm2 restart ospab-backend
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ü—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `backend/uploads/blog` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `755`)
2. Nginx —Ä–∞–∑–¥–∞—ë—Ç `/uploads/blog` (—Å–º. –∫–æ–Ω—Ñ–∏–≥ –≤—ã—à–µ)
3. –í –ª–æ–≥–∞—Ö backend –Ω–µ—Ç –æ—à–∏–±–æ–∫ multer

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
ls -la /var/www/ospab-host/ospabhost/backend/uploads/blog

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
pm2 logs ospab-backend --lines 50
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í–∫–ª–∞–¥–∫–∞ "üìù –ë–ª–æ–≥" –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–æ–º (`isAdmin !== true`)
- Frontend –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /var/www/ospab-host/ospabhost/frontend
npm run build
cp -r dist/* /var/www/ospab-host/frontend/
```

### –ü—Ä–æ–±–ª–µ–º–∞: Rich Text —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** `react-quill` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /var/www/ospab-host/ospabhost/frontend
npm install react-quill quill --legacy-peer-deps
npm run build
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Backend
- `multer` (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- `express` (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- `prisma` (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

### Frontend
- `react-quill@2.0.0` ‚úÖ –£–°–¢–ê–ù–û–í–õ–ï–ù–û
- `quill` ‚úÖ –£–°–¢–ê–ù–û–í–õ–ï–ù–û

---

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–í `backend/src/modules/blog/blog.routes.ts`:

```typescript
const upload = multer({
  storage: storage,
  limits: {
    fileSize: 10 * 1024 * 1024 // –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–≤ –±–∞–π—Ç–∞—Ö)
  },
  // ...
});
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

–í `backend/src/modules/blog/blog.routes.ts`:

```typescript
fileFilter: function (req, file, cb) {
  const allowedTypes = /jpeg|jpg|png|gif|webp|svg/; // –î–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
  // ...
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–Ω–µ–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Quill

–í `frontend/src/pages/dashboard/blogadmin.tsx` (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `quillModules`):

```typescript
const quillModules = {
  toolbar: {
    container: [
      // –î–æ–±–∞–≤—å—Ç–µ/—É–¥–∞–ª–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
      [{ 'header': [1, 2, 3, false] }],
      ['bold', 'italic', 'underline'],
      // ...
    ],
    // ...
  }
};
```

---

## üìö API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ü—É–±–ª–∏—á–Ω—ã–µ

- `GET /api/blog/posts` - –°–ø–∏—Å–æ–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
- `GET /api/blog/posts/:url` - –ü–æ—Å—Ç –ø–æ URL
- `POST /api/blog/posts/:postId/comments` - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

### –ê–¥–º–∏–Ω—Å–∫–∏–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω + isAdmin)

- `GET /api/blog/admin/posts` - –í—Å–µ –ø–æ—Å—Ç—ã
- `POST /api/blog/admin/posts` - –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç
- `PUT /api/blog/admin/posts/:id` - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç
- `DELETE /api/blog/admin/posts/:id` - –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç
- `POST /api/blog/admin/upload-image` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `DELETE /api/blog/admin/images/:filename` - –£–¥–∞–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `GET /api/blog/admin/comments` - –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `PATCH /api/blog/admin/comments/:id` - –ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `DELETE /api/blog/admin/comments/:id` - –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–≥–æ–≤ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
# –õ–æ–≥–∏ backend
pm2 logs ospab-backend

# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/error.log
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 01.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot
